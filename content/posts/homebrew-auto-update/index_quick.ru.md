---
title: "Essential for Mac Users: Homebrew Automatic Updates Configuration Guide"
date: 2025-05-03T11:09:08+04:00
slug: "homebrew-auto-update-guide"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250503111511793.webp"
tags:
  - "Мак"
  - "Домашний"
  - "автоматический"
  - "Инструменты эффективности"
---

# Mac Users Must Have: Homebrew Automatic Update Configuration Guide

У вас когда-нибудь возникали проблемы с программным обеспечением из-за того, что вы забыли обновить пакеты Homebrew? Или вы устали от необходимости каждый раз вручную выполнять команду update? В этой статье мы покажем вам простой способ заставить ваш Mac автоматически обновлять пакеты Homebrew в ранние утренние часы, пока вы просто спите!

<! ---далее-->

## Зачем мне нужно автоматически обновлять Homebrew?

Минг - дизайнер, который каждый день использует различные инструменты для дизайна на своем Mac. Однажды он обнаружил, что одна из его любимых программ для дизайна внезапно перестала работать должным образом. После некоторых поисков выяснилось, что одна из библиотек, на которую опирается программа, слишком устарела. Если бы он регулярно обновлял пакет Homebrew, то не столкнулся бы с этой проблемой.

Однако вручную выполнять команды `brew update` и `brew upgrade` слишком хлопотно и легко забыть. Есть ли способ заставить компьютер делать это автоматически?

## Решение: homebrew-autoupdate

Хорошая новость: существует инструмент под названием `homebrew-autoupdate`, который может помочь с автоматическим обновлением. Что еще лучше, недавно была добавлена опция `--leaves-only`, позволяющая обновлять только те пакеты, которые мы устанавливаем напрямую, а не те, которые устанавливаются в качестве зависимостей, что значительно снижает проблемы совместимости, вызванные обновлениями зависимостей.

## Как настроить автоматические обновления

### Шаг 1: Установите homebrew-autoupdate

Откройте терминал и введите следующую команду:

```bash
brew tap domt4/autoupdate
```.

### Шаг 2: Настройка автоматических обновлений

Далее нам нужно настроить автоматические обновления. Предполагая, что мы хотим, чтобы автоматические обновления происходили каждый день в 4:25 утра и только пакеты верхнего уровня (т.е. пакеты, которые устанавливаются напрямую, без учета зависимостей), мы можем использовать следующую команду:

```bash
brew autoupdate start 86400 --upgrade --leaves-only --cleanup
```

Смысл этой команды следующий:
- `start`: запустить автоматическое обновление
- `86400`: интервал обновления составляет 86400 секунд, т.е. 24 часа.
- `--upgrade`: обновлять не только сам Homebrew, но и установленные пакеты
- __PROTECTED_INLINE_CODE__16__: обновление только пакетов верхнего уровня, но не зависимостей
- __PROTECTED_INLINE_CODE__17__: автоматическая очистка старых версий и кэшированных файлов.

### Шаг 3: Подтверждение успешной установки

Чтобы убедиться, что автоматическое обновление было настроено успешно, можно воспользоваться следующей командой:

```bash
brew autoupdate status
```_.

Если вы увидите сообщение типа "Autoupdate is currently running..." это означает, что настройка прошла успешно.

## Как настроить время обновления

По умолчанию homebrew-autoupdate будет запускаться один раз сразу после запуска и затем каждые заданные промежутки времени (например, 24 часа). Но это может быть не то, что нам нужно.

Если вы хотите, чтобы обновление запускалось в определенное время (например, в 4:25 утра), вы можете остановить текущее автообновление, а затем настроить его вручную с помощью системы launchd на Mac.

### Шаг 1: Остановите текущее автоматическое обновление.

```bash
brew autoupdate delete
```

### Шаг 2: Отредактируйте файл plist

Сначала запустите автоматическое обновление, но не запускайте его сразу:

```bash
brew autoupdate start 86400 --upgrade --leaves-only --cleanup
```.

Затем отредактируйте файл plist:

```bash
open -e ~/Library/LaunchAgents/com.github.domt4.homebrew-autoupdate.plist
```

В открывшемся файле найдите строки `<key>StartInterval</key>` и `<integer>86400</integer>` и замените их на:

```xml
<key>StartCalendarInterval</key>
<dict>
    <key>Hour</key>
    <integer>4</integer>
    <key>Minute</key>
    <integer>25</integer>
</dict>
```

Сохраните файл и закройте его.

### Шаг 3: Перезагрузите файл plist

```bash
launchctl unload ~/Library/LaunchAgents/com.github.domt4.homebrew-autoupdate.plist
launchctl load ~/Library/LaunchAgents/com.github.domt4.homebrew-autoupdate.plist
```.

Теперь автообновление будет запускаться в 4:25 утра каждый день, а не каждые 24 часа.

## Просмотр журнала обновлений

Если вы хотите просмотреть журналы автоматических обновлений, их можно найти в следующем месте:

```bash
~/Library/Logs/com.github.domt4.homebrew-autoupdate/
```.

## Резюме

Утилита homebrew-autoupdate позволяет легко обновлять пакеты Homebrew автоматически, избавляя вас от необходимости выполнять команды вручную. В частности, с помощью новой опции `--leaves-only` можно обновлять только пакеты верхнего уровня, что значительно снижает проблемы совместимости, вызванные обновлением зависимостей.

После настройки ваш Mac будет автоматически обновлять пакеты Homebrew каждый день в 4:25 утра, поддерживая актуальность вашего программного обеспечения и уменьшая проблемы с версионированием.

Есть ли у вас другие инструменты автоматизации для повышения производительности? Не стесняйтесь делиться своим опытом в разделе комментариев!
