---
title: "Как исправить необъяснимое отъедание памяти компьютера"
date: 2025-02-25T00:26:22+04:00
slug: "how-to-fix-computer-memory-issues"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250225002834946.webp"
tags:
  - "сбой компьютера"
  - "Проблемы с памятью"
  - "качество программного обеспечения"
---

Как обычный офисный сотрудник, вы когда-нибудь сталкивались с тем, что компьютер внезапно начинает лагать или даже не может открыть обычный файл? Это может быть связано с тем, что память вашего компьютера программа спокойно "съедает"! Сегодня я хочу поделиться с вами своим опытом решения проблемы утечки памяти, вызванной программным обеспечением безопасности крупного предприятия.

<! ---далее-->

## Проблема найдена: почему мой компьютер так сильно тормозит?

Ли - обычный финансовый работник. Недавно он обнаружил, что его компьютер стал ненормально медленным. Всякий раз, когда ему нужно открыть Excel, чтобы обработать финансовую отчетность, компьютер, словно старик, идет со скоростью черепахи, а иногда даже полностью застревает. Ли пришлось обратиться за помощью в IT-отдел, но ответ часто звучал так: "Попробуйте перезагрузить компьютер".

Перезагрузка на время снимает проблему, но вскоре она появляется снова. Почему так происходит?

## Процесс расследования: поиск похитителя памяти

Чтобы выяснить, какие программы тайно занимают память, мы можем воспользоваться инструментами, поставляемыми с системой, для проверки.

В MacOS мы можем использовать инструмент "Монитор активности":

![活动监视器界面示意图 - 显示各个进程占用的内存](https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250225003017057.webp)

Посмотрев на него, мы увидим, что процесс под названием "Some Security Software" занимает огромные 32 ГБ памяти! Для компьютера с 16 ГБ оперативной памяти это означает, что вся память занята, и даже пространство на жестком диске используется для имитации памяти (это называется "памятью подкачки"), поэтому компьютер работает так медленно.

Для дальнейшего подтверждения проблемы можно использовать инструмент командной строки для проверки:

```
$ top -o MEM
Processes: 597 total, 6 running, 591 sleeping, 3345 threads            15:05:52
Load Avg: 4.14, 6.03, 7.50  CPU usage: 16.31% user, 12.21% sys, 71.46% idle
SharedLibs: 283M resident, 48M data, 21M linkedit.
MemRegions: 569011 total, 5009M resident, 375M private, 1518M shared.
PhysMem: 15G used (4832M wired, 2441M compressor), 133M unused.
VM: 244T vsize, 4915M framework vsize, 707542034(0) swapins, 725738737(0) swapou
Networks: packets: 321637686/182G in, 373742644/194G out.
Disks: 495571575/15T read, 285149199/12T written.

PID    COMMAND      %CPU TIME     #TH    #WQ  #PORT MEM    PURG   CMPRS PGRP
37458  com.beyondtr 6.9  02:18:52 8      7    54    32G+   0B     31G   37458
0      kernel_task  11.9 67:01:42 560/10 0    0     2316M+ 0B     0B    0
1174   WindowServer 32.2 40:36:52 20     5    7198  1308M+ 13M    760M  1174
1540   com.crowdstr 0.7  01:56:29 6      5    118   568M   0B     495M  1540
44045  OrbStack Hel 0.4  01:50.23 72     2    235   554M   0B     316M  44045
2573   iTerm2       8.4  14:01:35 10/2   6    484   408M   0B     117M  2573
$ ps aux | awk '{print $4"\t"$11}' | sort -n | tail -n 20
0.5    npm
0.5    npm
0.5    npm
0.5    npm
0.5    npm
0.5    npm
0.5    npm
0.6    /Applications/ChatGPT.app/Contents/MacOS/ChatGPT
0.6    /Applications/Claude.app/Contents/Frameworks/Claude
0.7    /Applications/Claude.app/Contents/Frameworks/Claude
0.7    /System/Library/CoreServices/Finder.app/Contents/MacOS/Finder
0.8    /Library/Application
1.0    /Library/Application
1.0    /Library/SystemExtensions/2EA82EEB-3E89-4B87-8DE2-B9C8E55AE16A/com.beyondtrust.endpointsecurity.systemextension/Contents/MacOS/com.beyondtrust.endpointsecurity
1.2    /Applications/Claude.app/Contents/MacOS/Claude
1.3    /Applications/Claude.app/Contents/Frameworks/Claude
1.3    /Applications/iTerm.app/Contents/MacOS/iTerm2
1.3    /System/Library/PrivateFrameworks/SkyLight.framework/Resources/WindowServer
1.6    /Applications/OrbStack.app/Contents/Frameworks/OrbStack
5.6    /Applications/Claude.app/Contents/Frameworks/Claude
```.

Эта команда отображает все процессы, отсортированные по использованию памяти. Конечно, процесс под названием "Some Security Software" находится в верхней части списка, занимая 32 ГБ памяти!

## Правда раскрыта: так называемое "высококлассное программное обеспечение безопасности" на самом деле является первопричиной проблемы!

Самое удивительное, что пожирателем памяти является известное европейское и американское ПО для обеспечения безопасности, на которое компания потратила много денег. Программное обеспечение под названием BeyondTrust утверждает, что способно защитить компании от всех видов киберугроз, но на самом деле у него есть своя серьезная проблема с утечкой памяти.

Что означает утечка памяти? Проще говоря, это означает, что программное обеспечение запрашивает память, а затем забывает ее вернуть, как если бы вы взяли книгу в библиотеке, но не вернули ее. Со временем доступной памяти становится все меньше и меньше, и компьютер, естественно, замедляется.

## Временное решение: завершить процесс

Теперь, когда мы знаем, в чем проблема, решение относительно простое. Мы можем временно завершить процесс:

```
$ ps aux | grep -i beyond
root              1907  18.0  0.1 412056736  14560   ??  Ss   13Jan25 1819:04.08 /Library/PrivilegedHelperTools/com.beyondtrust.interrogator
root             37458  11.1  1.2 494362512 200192   ??  Ss   Tue05PM 139:20.98 /Library/SystemExtensions/2EA82EEB-3E89-4B87-8DE2-B9C8E55AE16A/com.beyondtrust.endpointsecurity.systemextension/Contents/MacOS/com.beyondtrust.endpointsecurity
$ kill 1907
kill: sending signal to 1907 failed: Permission denied
$ sudo kill 1907
Password:
$ top -o MEM
Processes: 605 total, 5 running, 600 sleeping, 3400 threads            15:16:40
Load Avg: 4.73, 4.99, 6.03  CPU usage: 20.0% user, 13.75% sys, 66.25% idle
SharedLibs: 343M resident, 64M data, 26M linkedit.
MemRegions: 173764 total, 4391M resident, 352M private, 1810M shared.
PhysMem: 14G used (4854M wired, 2004M compressor), 700M unused.
VM: 247T vsize, 4915M framework vsize, 707806926(0) swapins, 725844910(0) swapou
Networks: packets: 321838795/182G in, 373959772/194G out.
Disks: 495698040/15T read, 285221315/12T written.

PID    COMMAND      %CPU TIME     #TH    #WQ  #PORT MEM    PURG   CMPRS  PGRP
0      kernel_task  12.9 67:02:59 560/10 0    0     2316M+ 0B     0B     0
1174   WindowServer 36.3 40:39:42 21/1   5    7204- 1307M+ 17M+   814M   1174
44045  OrbStack Hel 0.6  01:55.72 72     2    235   564M+  0B     313M-  44045
93665  Claude Helpe 6.5  01:49.93 33     1    409   455M   0B     25M    93037
2573   iTerm2       7.0  14:02:34 10     6    479   413M   0B     122M   2573
```

После ввода пароля проблемный процесс будет завершен, и память сразу же вернется к нормальному уровню! Компьютер также возвращается к нормальной скорости и может работать без сбоев.

## Углубляемся: проверяем другие компоненты системы

После решения основной проблемы мы заметили, что компонент системы "Служба окон" также занимает много памяти. Однако этот компонент является основной частью системы, отвечающей за отображение и управление всеми окнами, поэтому определенный объем памяти является нормальным.

Если вы обнаружили, что этот компонент занимает слишком много памяти, вы можете попробовать:

1. уменьшить количество открытых окон и вкладок
2. перезапустить док, чтобы обновить управление окнами.
   ```
   $ killall Dock
   ```_.

Этот метод быстрее, чем полная перезагрузка компьютера, и так же эффективен.

## Отражение: бренд не означает высокое качество

Этот опыт заставляет нас задуматься: почему с таким известным программным обеспечением безопасности возникают столь серьезные проблемы?

В мире программного обеспечения иногда нас слишком легко сбить с толку аурой крупных европейских и американских брендов, думая, что их продукты должны быть самыми лучшими. Но на самом деле у любого программного обеспечения могут быть проблемы, и мы должны использовать реальный опыт, чтобы судить о его качестве.

Тот факт, что программное обеспечение крупного бренда имеет столь очевидные утечки памяти и не устраняет их в течение длительного времени, не только влияет на пользовательский опыт, но и может привести к другим рискам безопасности. В конце концов, как может надежно защитить нашу систему программа безопасности, которая даже не может управлять собственной памятью?

## Резюме: будьте бдительны и выбирайте с умом!

Благодаря этому опыту мы узнали несколько важных вещей:

1. когда ваш компьютер тормозит, это может быть связано с тем, что программа занимает слишком много памяти.
2. Используйте монитор активности или команду top, чтобы найти программы, занимающие много памяти.
3. Иногда эффективным способом решения проблемы является временное завершение проблемного процесса.
4. не верьте слепо названию бренда, а судите о качестве программного обеспечения по реальному опыту.

Надеюсь, эта статья поможет вам не растеряться при возникновении подобных проблем. Помните, что даже самый простой пользователь может решить, казалось бы, сложные компьютерные проблемы с помощью простых инструментов и методов.

А у вас был подобный опыт? Не стесняйтесь делиться своими историями и опытом в разделе комментариев!
