---
title: "Hugo Blog Руководство по настройке фильтрации системных файлов"
date: 2025-02-16T01:44:29+04:00
slug: "hugo-file-filtering-guide"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250216014557430.webp"
tags:
  - "Хьюго"
  - "блог (заимствованное слово)"
  - "настроить"
---

При использовании системы блогов Hugo нам часто требуется фильтровать файлы сообщений. Например, вы можете захотеть, чтобы только определенные именованные файлы отображались как веб-страницы, а остальные игнорировались. В этой статье описывается, как добиться этого с помощью простой конфигурации.

<! --подробнее-->

## Background

Допустим, в вашем блоге есть такое требование:
- Только файлы `index.md`, `index_quick.md` и `index_deep.md` должны быть отображены.
- Другие файлы в формате Markdown не должны отображаться, даже если у них есть первая часть.

Это требование часто встречается при управлении несколькими версиями статьи или поддержании определенной структуры организации файлов. Как же элегантно реализовать это требование?

## Параметры конфигурации

С практикой мы пришли к выводу, что использование конфигурации Hugo `module.mounts` является самым простым и эффективным решением. В конфигурационный файл Hugo (возможно, `config.yaml`, `config.toml` или `hugo.toml`) добавьте следующую конфигурацию:

```yaml
module:
  mounts:
    - source: content
      target: content
      includeFiles: ["**/index.md", "**/index_quick.md", "**/index_deep.md"]
```

Значение этой конфигурации следующее:
- `source` и `target` указывают директории, над которыми мы хотим работать.
- Список `includeFiles` указывает на файлы, которые мы хотим включить.
- В списке `**/` указываются подкаталоги любой глубины, чтобы конфигурация работала для всех подкаталогов.

## Почему вы выбрали этот вариант?

Во время наших экспериментов мы также рассматривали возможность использования конфигурации `ignoreFiles` для исключения нежелательных файлов с помощью регулярных выражений. Однако с этим вариантом есть несколько проблем:
1. регулярные выражения сложны и чреваты ошибками.
2. Hugo использует относительно ограниченный движок Go.
3. высокая стоимость обслуживания, особенно при изменении правил именования файлов.

В отличие от этого, преимуществами использования `includeFiles` являются:
1. простая и интуитивно понятная конфигурация
2. использование синтаксиса подстановочных знаков, который легко понять и изменить
3. четкое указание включаемых файлов, меньшая вероятность неожиданностей

## Проверка эффекта

После завершения настройки Hugo будет обрабатывать только 1. файл index.md в каталоге posts и его подкаталогах:
1. файл index.md в каталоге posts и его подкаталогах
2. файл index_quick.md в директории posts и ее поддиректориях
3. файл index_deep.md в директории posts и ее поддиректориях

Все остальные .md-файлы игнорируются, даже если они содержат корректный front matter.

## Советы

1. Не забудьте перезапустить сервер Hugo после изменения конфигурации, чтобы новая конфигурация вступила в силу.
2. Используйте команду `hugo -v` для просмотра подробного журнала сборки, чтобы убедиться, что файлы обрабатываются так, как ожидалось.
3. Если вы обнаружили, что файл не был обработан, как ожидалось, проверьте, совпадает ли имя файла с шаблоном, указанным в конфигурации.

Эта конфигурация не только поможет вам сохранить порядок в содержимом блога, но и гарантирует, что только указанные файлы будут отображаться в виде веб-страниц. С помощью простой конфигурации вы можете легко удовлетворить потребности в фильтрации файлов, сделав управление блогом более простым и контролируемым.
