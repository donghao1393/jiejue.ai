---
title: "Hugo Blog Руководство по настройке фильтрации системных файлов"
date: 2025-02-16T01:44:29+04:00
slug: "hugo-file-filtering-guide"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250216014557430.webp"
tags:
  - "Хьюго"
  - "блог (заимствованное слово)"
  - "настроить"
---

При использовании системы блогов Hugo нам часто требуется фильтровать файлы сообщений. Например, вы можете захотеть, чтобы только определенные именованные файлы отображались как веб-страницы, а остальные игнорировались. В этой статье описывается, как добиться этого с помощью простой конфигурации.

<!--more-->

## 背景

Допустим, вашему блогу требуется следующее:
- Верстать только файлы `index.md`, `index_quick.md` и `index_deep.md`.
- Другие файлы в формате Markdown не должны отображаться, даже если в них есть первая часть.

Это требование часто встречается при управлении несколькими версиями статей или поддержании определенной структуры организации файлов. Как же элегантно реализовать это требование?

## 配置方案

На практике мы обнаружили, что использование конфигурации `module.mounts` в Hugo является самым простым и эффективным решением. В конфигурационный файл Hugo (возможно, `config.yaml`, `config.toml` или `hugo.toml`) добавьте следующую конфигурацию:

```yaml
module:
  mounts:
    - source: content
      target: content
      includeFiles: ["**/index.md", "**/index_quick.md", "**/index_deep.md"]
```

Смысл этой конфигурации заключается в следующем:
- `source` и `target` указывают директории, с которыми мы хотим работать.
- Список `includeFiles` указывает файлы, которые мы хотим включить.
- `**/` указывает на подкаталог произвольной глубины, поэтому данная конфигурация действительна для всех подкаталогов.

## 为什么选择这种方案？

Во время наших попыток мы также рассматривали возможность использования конфигурации `ignoreFiles` для исключения нежелательных файлов с помощью регулярных выражений. Однако с этим вариантом есть несколько проблем:
1. регулярные выражения сложны и подвержены ошибкам.
2. Hugo использует относительно ограниченный регулярный движок Go.
3. высокая стоимость обслуживания, особенно при изменении правил именования файлов.

В отличие от этого, преимущества использования `includeFiles` таковы:
1. конфигурация проста и интуитивно понятна
2. использование синтаксиса подстановочных знаков, который легко понять и изменить
3. явное указание включаемых файлов, что снижает вероятность неожиданностей

## 效果验证

После завершения настройки Hugo будет обрабатывать только:
1. файл index.md в каталоге posts и его подкаталогах
2. файл index_quick.md в директории posts и ее поддиректориях
3. файл index_deep.md в директории posts и ее поддиректориях

Все остальные файлы .md игнорируются, даже если они содержат правильный титульный лист.

## 小贴士

1. Не забудьте перезапустить сервер Hugo после изменения конфигурации, чтобы новая конфигурация вступила в силу.
2. Вы можете использовать команду `hugo -v` для проверки подробных журналов сборки, чтобы убедиться, что файлы обрабатываются так, как ожидалось.
3. Если вы обнаружили, что файл не был обработан, как ожидалось, проверьте, точно ли имя файла совпадает с шаблоном, указанным в конфигурации.

Такой способ настройки не только помогает поддерживать порядок в содержимом блога, но и гарантирует, что только указанные файлы будут отображаться в виде веб-страниц. Необходимость фильтрации файлов может быть легко реализована с помощью простой конфигурации, что делает управление блогом более простым и контролируемым.