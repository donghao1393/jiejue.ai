---
title: "Как сделать так, чтобы список сообщений темы Hugo отображался на главной странице"
date: 2025-02-01T10:33:03+04:00
slug: "hugo-show-all-posts-in-homepage"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250201103520844.webp"
tags:
  - "hugo"
  - "внешняя разработка"
  - "Индивидуальные темы"
---

При использовании темы Hugo Dream я обнаружил, что на главной странице по умолчанию включена подкачка, и на каждой странице отображается только ограниченное количество статей. Хотя подкачка может улучшить скорость загрузки страниц, но в случае с небольшим количеством статей подкачка скорее влияет на пользовательское восприятие. В этой статье мы расскажем, как изменить тему Hugo так, чтобы все статьи отображались на главной странице.

<!--more-->

## 问题背景

Тема Hugo Dream по умолчанию использует функцию пагинации для отображения списка сообщений, что приводит к:

1. чтобы увидеть больше статей, пользователям нужно нажать кнопку "Следующая страница".
2. некоторые статьи скрыты, что снижает вероятность их обнаружения.
3. Недостаточно дружелюбен для поисковых машин.

## 分析原因

Проверив исходный код темы, я обнаружил, что пагинация реализована в теме `layouts/index.html` с помощью функции Hugo `.Paginate`:

```html
{{ $paginator := .Paginate (where site.RegularPages "Type" "posts") }}

<div class="dream-grid">
  {{ range $paginator.Pages }}
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    {{ .Render "summary" }}
  </div>
  {{ end }}
</div>
```

## 解决方案

Есть два способа добиться того, чтобы все статьи отображались на первой странице:

### 1. 配置方案

Установите большее количество статей на страницу в файле конфигурации сайта (hugo.toml):

```toml
[params.paginate]
default = 100  # 设置一个足够大的数字
```

Этот метод прост, но недостаточно элегантен, и он все равно будет выводить страницы, если количество статей превысит заданное значение.

### 2. 主题覆盖方案

Создайте пользовательские макеты/index.html, чтобы переопределить шаблоны темы, полностью удалив функцию пагинации:

```html
{{ define "main"}}

{{ if site.Params.zenMode }}
<div class="dream-zen-posts max-w-[65ch] mt-8 mx-auto px-4 space-y-8">
{{ range (where site.RegularPages "Type" "posts") }}
  {{ .Render "zen-summary" }}
{{ end }}
</div>
{{ else }}
<div class="dream-grid">
  {{ range (where site.RegularPages "Type" "posts") }}
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    {{ .Render "summary" }}
  </div>
  {{ end }}
</div>
{{ end }}

{{ конец }}

{{ define "js" }}
{{ if site.Params.Experimental.jsDate }}
{{ partial "luxon.html" . }}
{{ end }}
{{ end }}
```

Основные изменения:
1. удалите функцию `.Paginate`.
2. используйте `range` для прямого обхода всех статей
3. сохраняется оригинальный стиль оформления
4. сохраняются другие возможности темы (например, форматирование даты и т. д.)

## 性能考虑

Хотя удаление пагинации приводит к тому, что на главной странице загружается больше содержимого, этот вариант желателен в следующих ситуациях:

1. умеренное количество статей в блоге (например, менее 100)
2. аннотация статьи хорошо контролируется, чтобы не загружать слишком много контента
3. используются CDN или другие механизмы кэширования.
4. пользователей больше интересует доступность контента, чем скорость загрузки

Если в будущем количество статей значительно увеличится, это может быть рассмотрено:

1. Вновь внедрить механизм пагинации
2. Бесконечная загрузка прокрутки
3. Используйте технологию виртуальной прокрутки во внешнем интерфейсе
4. Добавьте навигацию по статьям

## 总结

С помощью пользовательских переопределений шаблона мы элегантно реализовали полное отображение списка постов, чтобы улучшить пользовательский опыт. Это решение сохраняет совместимость с темой, оставляя место для будущего обслуживания и обновления. `