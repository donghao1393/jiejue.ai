---
title: "Как сделать так, чтобы список сообщений темы Hugo отображался на главной странице"
date: 2025-02-01T10:33:03+04:00
slug: "hugo-show-all-posts-in-homepage"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250201103520844.webp"
tags:
  - "hugo"
  - "внешняя разработка"
  - "Индивидуальные темы"
---

При использовании темы Hugo Dream я обнаружил, что на главной странице по умолчанию включена подкачка, и на каждой странице отображается только ограниченное количество статей. Хотя подкачка может улучшить скорость загрузки страниц, но в случае с небольшим количеством статей подкачка скорее влияет на пользовательское восприятие. В этой статье мы расскажем, как изменить тему Hugo так, чтобы все статьи отображались на главной странице.

<! --подробнее-->

## Проблемный фон

Тема Hugo Dream по умолчанию использует функцию пагинации для отображения списка постов, что приводит к:

1. пользователям приходится нажимать "следующую страницу", чтобы увидеть больше статей.
2. некоторые статьи скрыты, что снижает процент открытий.
3. Недостаточно дружелюбно для поисковых машин.

## Анализ причин

Проверив исходный код темы, мы обнаружили, что функция пагинации реализована в `layouts/index.html` темы через функцию Hugo `.Paginate`:

```html
{{ $paginator := .Paginate (where site.RegularPages "Type" "posts") }}

<div class="dream-grid">
  {{ range $paginator.Pages }}
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    {{ .Render "summary" }}
  </div>
  {{ end }}
</div>
```.

## Решение

Есть два способа добиться того, чтобы все статьи отображались на первой странице:

### 1. Конфигурационное решение

Задайте большее количество статей на страницу в файле конфигурации сайта (hugo.toml):

```toml
[params.paginate]
default = 100  # 设置一个足够大的数字
```.

Этот метод прост, но недостаточно элегантен, и при превышении количества статей над заданным значением страница все равно будет отображаться.

### 2. Схема переопределения темы

Создайте пользовательский layouts/index.html, чтобы переопределить шаблон темы и полностью убрать пагинацию:

```html
{{ define "main"}}

{{ if site.Params.zenMode }}
<div class="dream-zen-posts max-w-[65ch] mt-8 mx-auto px-4 space-y-8">
{{ range (where site.RegularPages "Type" "posts") }}
  {{ .Render "zen-summary" }}
{{ end }}
</div>
{{ else }}
<div class="dream-grid">
  {{ range (where site.RegularPages "Type" "posts") }}
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    {{ .Render "summary" }}
  </div>
  {{ end }}
</div>
{{ end }}

{{ end }}

{{ define "js" }}
{{ if site.Params.Experimental.jsDate }}
{{ partial "luxon.html" . }}
{{ end }}
{{ end }}
```

Основные изменения:
1. удалите функцию `.Paginate`. 2.
2. напрямую использовать `range` для обхода всех статей.
3. сохранить оригинальный стиль оформления
4. сохранить другие возможности темы (например, форматирование даты и т. д.)

## Соображения по производительности

Хотя удаление пагинации приводит к загрузке большего количества контента на главной странице, эта опция желательна в следующих случаях:

1. количество статей в блоге умеренное (например, менее 100)
2. сводка статей контролируется должным образом, чтобы не загружать слишком много контента
3. используются CDN или другие механизмы кэширования.
4. пользователи ценят доступность контента больше, чем скорость загрузки

Может быть рассмотрен, если количество статей значительно увеличится в будущем:

1. повторное введение пагинации
2. внедрение бесконечной прокрутки
3. использование технологии виртуальной прокрутки на фронтэнде
4. добавление навигации по категориям статей

## Резюме

Настроив наложение шаблона, мы добились элегантного отображения полного списка статей и улучшили пользовательский опыт. Это решение сохраняет совместимость с темой, а также оставляет возможность для будущего обслуживания и обновления. `
