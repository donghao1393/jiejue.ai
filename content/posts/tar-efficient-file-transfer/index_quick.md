---
title: "用tar命令高效传输文件：告别漫长等待"
date: 2025-03-27T23:10:12+04:00
slug: 'efficient-file-transfer-with-tar'
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250327231241540.webp"
tags:
  - 命令行技巧
  - 文件传输
  - macOS
---

作为一名设计师，我最近换了一台新Mac电脑，需要从旧电脑上移动几十GB的设计素材和项目文件。当我尝试使用Finder直接拖拽复制那些包含成千上万小文件的文件夹时，传输速度慢得让人崩溃。这篇文章将分享一个简单却超级实用的方法，帮助你在几分钟内解决这个问题。

<!--more-->

## 问题：为什么复制大量小文件这么慢？

小美是一名忙碌的平面设计师，最近公司给她配了一台新MacBook Pro。她需要将旧电脑上的工作文件转移到新电脑上，其中包括数百个项目文件夹，每个文件夹里又包含大量设计稿、素材和配置文件。当她用Finder或者外接硬盘复制时，看到进度条几乎不动，估计要等上几个小时。

这种情况其实很常见。无论你是在：
- 备份微信/QQ聊天记录文件夹（包含大量缓存图片）
- 转移大型项目代码库（包含成千上万的小文件）
- 复制庞大的照片/素材库

当系统需要处理每个单独文件的读取、复制和写入操作时，大量的小文件会导致性能瓶颈，即使你使用的是高速的雷电或USB接口。

## 解决方案：使用tar命令打包传输

tar命令（"tape archive"的缩写）是Unix/Linux系统中的一个强大工具，它可以将多个文件集合成一个单一的归档文件，而不进行压缩。这种方法比直接复制多个文件要快得多，因为：

1. 系统只需要处理一个大文件，而不是成千上万个小文件
2. 避免了每个文件的元数据处理开销
3. 能更高效地利用存储设备的传输速度

## 具体步骤：如何操作

小美可以按照以下步骤高效地传输她的文件：

### 第一步：打开终端

点击屏幕右上方的搜索图标，输入"终端"（或Terminal），点击打开。

### 第二步：创建tar归档（不压缩）

在终端中，输入以下命令：

```bash
tar -cf my_files.tar /path/to/folder
```

这里：
- `my_files.tar` 是你要创建的归档文件名
- `/path/to/folder` 是你想要打包的文件夹路径

比如，小美想要打包桌面上的"DesignProjects"文件夹，她会输入：

```bash
tar -cf design_projects.tar ~/Desktop/DesignProjects
```

如果想在打包过程中查看进度，可以添加`-v`选项（v表示verbose，详细模式）：

```bash
tar -cvf design_projects.tar ~/Desktop/DesignProjects
```

### 第三步：将tar文件传输到新电脑

现在，小美只需要将这个单一的`design_projects.tar`文件复制到新电脑上，可以使用：
- 外接硬盘
- 网络传输
- 直接连接两台Mac（如通过雷电线）

复制单个大文件比复制大量小文件快得多！

### 第四步：在新电脑上解包文件

在新电脑的终端中，导航到你希望解包文件的位置，然后输入：

```bash
tar -xf design_projects.tar
```

如果想要解包到特定目录：

```bash
tar -xf design_projects.tar -C /destination/path
```

例如，解包到"Documents"文件夹：

```bash
tar -xf design_projects.tar -C ~/Documents
```

如果要保留原始文件的所有权限，尤其是在跨用户账户迁移时，可以使用：

```bash
tar -xpf design_projects.tar -C ~/Documents
```

## 实用提示：避免打包不需要的文件

如果你的文件夹中包含一些不需要传输的文件（比如大量缓存图片或临时文件），可以在创建tar归档时排除它们：

```bash
tar -cf my_files.tar --exclude="*.jpg" /path/to/folder
```

这个命令会打包指定文件夹中除了jpg图片以外的所有文件。

## 成果：节省大量时间

使用tar打包传输方法，小美只花了20分钟就完成了原本需要几个小时的文件传输任务，而且确保了所有文件权限和结构都得到了完整保留。

这个简单但强大的命令行技巧对于任何需要在电脑之间移动大量文件的人来说都非常有用，无论你是设计师、开发者还是普通用户。

## 小结

当你面对大量小文件传输的问题时，不要被漫长的等待时间困扰，尝试使用tar命令来创建一个单一的归档文件。这个方法简单高效，不会改变你的文件内容，只是暂时将它们打包在一起以便快速传输。即使你不熟悉命令行，按照上述步骤操作也能轻松完成文件传输任务。

如有任何问题或需要更详细的指导，欢迎在评论区留言！
