---
title: "Эффективная передача файлов с помощью команды tar: попрощайтесь с долгим ожиданием!"
date: 2025-03-27T23:10:12+04:00
slug: "efficient-file-transfer-with-tar"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250327231241540.webp"
tags:
  - "Советы по работе с командной строкой"
  - "передача файлов"
  - "macOS"
---

Как дизайнер, я недавно приобрел новый компьютер Mac, и мне нужно было перенести десятки гигабайт дизайнерских материалов и файлов проектов со старого компьютера. Когда я попытался использовать Finder для прямого перетаскивания папок с тысячами мелких файлов, скорость передачи оказалась ужасно низкой. В этом посте мы поделимся простым, но очень практичным методом, который поможет вам решить эту проблему за считанные минуты.

<!--more-->

## 问题：为什么复制大量小文件这么慢？

Мэй - занятой графический дизайнер, и недавно компания подарила ей новый MacBook Pro. Ей нужно перенести рабочие файлы со старого компьютера на новый, а это сотни папок с проектами, каждая из которых, в свою очередь, содержит большое количество эскизов, материалов и файлов конфигурации. Когда она использовала Finder или внешний жесткий диск для копирования, она видела, что индикатор выполнения едва двигается, и предполагала, что ей придется ждать несколько часов.

На самом деле это довольно распространенное явление. Независимо от того, находитесь ли вы в:
- Резервное копирование папки истории чатов WeChat/QQ (содержит много кэшированных изображений)
- Перенос кодовой базы большого проекта (содержит тысячи мелких файлов)
- Дублирование огромных библиотек фотографий/материалов

Большое количество маленьких файлов может привести к снижению производительности, когда система должна обрабатывать операции чтения, копирования и записи для каждого отдельного файла, даже если вы используете высокоскоростной интерфейс Thunderbolt или USB.

## 解决方案：使用tar命令打包传输

Команда tar (сокращение от "ленточный архив") - это мощный инструмент в системах Unix/Linux, который позволяет собирать несколько файлов в один архив без сжатия. Этот метод намного быстрее, чем прямое копирование нескольких файлов, потому что:

1. системе приходится иметь дело только с одним большим файлом вместо тысяч маленьких файлов
2. избежание накладных расходов на обработку метаданных для каждого файла
3. более эффективное использование скорости передачи данных на устройствах хранения

## 具体步骤：如何操作

Мей может выполнить следующие действия, чтобы эффективно передать свои файлы:

### 第一步：打开终端

Нажмите на значок поиска в правом верхнем углу экрана, введите "terminal" (или Terminal) и нажмите кнопку Открыть.

### 第二步：创建tar归档（不压缩）

В терминале введите следующую команду:

```bash
tar -cf my_files.tar /path/to/folder
```

Здесь:
- `my_files.tar` - это имя архива, который вы хотите создать.
- `/path/to/folder` - путь к папке, в которую вы хотите упаковать архив

Например, если Сяо Мэй хочет упаковать папку "DesignProjects" на рабочем столе, она введет команду:

```bash
tar -cf design_projects.tar ~/Desktop/DesignProjects
```

Если вы хотите просмотреть прогресс во время процесса упаковки, вы можете добавить опцию `-v` (v означает verbose, подробный режим):

```bash
tar -cvf design_projects.tar ~/Desktop/DesignProjects
```

### 第三步：将tar文件传输到新电脑

Теперь Мэй нужно просто скопировать этот единственный файл `design_projects.tar` на новый компьютер, который можно использовать:
- внешний жесткий диск
- сетевая передача
- прямое соединение между двумя компьютерами Mac (например, через thunderbolt)

Копирование одного большого файла происходит гораздо быстрее, чем копирование большого количества маленьких файлов!

### 第四步：在新电脑上解包文件

В терминале нового компьютера перейдите в место, где вы хотите распаковать файл, и введите:

```bash
tar -xf design_projects.tar
```

Если вы хотите распаковать в определенный каталог:

```bash
tar -xf design_projects.tar -C /destination/path
```

Например, распакуйте в папку "Документы":

```bash
tar -xf design_projects.tar -C ~/Documents
```

Это можно использовать, если вы хотите сохранить все разрешения на исходный файл, особенно при переносе через учетные записи пользователей:

```bash
tar -xpf design_projects.tar -C ~/Documents
```

## 实用提示：避免打包不需要的文件

Если в вашей папке есть файлы, которые не нужно передавать (например, большое количество кэшированных изображений или временных файлов), вы можете исключить их при создании tar-архива:

```bash
tar -cf my_files.tar --exclude="*.jpg" /path/to/folder
```

Эта команда упакует все файлы в указанной папке, кроме изображений jpg.

## 成果：节省大量时间

Используя метод передачи файлов в tar-упаковке, Сяомэй выполнил задачу по передаче файлов, которая заняла бы несколько часов, всего за 20 минут и обеспечил сохранение всех разрешений и структуры файлов в неизменном виде.

Этот простой, но мощный трюк из командной строки пригодится всем, кому нужно перемещать большое количество файлов между компьютерами, будь то дизайнер, разработчик или обычный пользователь.

## 小结

Если вы столкнулись с проблемой передачи большого количества маленьких файлов, не мучайтесь долгим ожиданием, а попробуйте использовать команду tar для создания одного архивного файла. Этот метод прост и эффективен, он не изменит содержимое ваших файлов, а просто временно упакует их вместе для быстрой передачи. Даже если вы не знакомы с командной строкой, выполнение описанных выше шагов упростит задачу передачи файлов.

Если у вас есть вопросы или нужны более подробные инструкции, оставляйте их в комментариях!