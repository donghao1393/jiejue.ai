---
title: "Эффективная передача файлов с помощью команды tar: попрощайтесь с долгим ожиданием!"
date: 2025-03-27T23:10:12+04:00
slug: "efficient-file-transfer-with-tar"
draft: false
cover: "https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250327231241540.webp"
tags:
  - "Советы по работе с командной строкой"
  - "передача файлов"
  - "macOS"
---

Как дизайнер, я недавно приобрел новый компьютер Mac, и мне нужно было перенести десятки гигабайт дизайнерских материалов и файлов проектов со старого компьютера. Когда я попытался использовать Finder для прямого перетаскивания папок с тысячами мелких файлов, скорость передачи оказалась ужасно низкой. В этом посте мы поделимся простым, но очень практичным методом, который поможет вам решить эту проблему за считанные минуты.

<! -еще-->

## Проблема: Почему копирование большого количества маленьких файлов происходит так медленно?

Мэй - занятой графический дизайнер, и недавно ее компания подарила ей новый MacBook Pro. Ей нужно перенести рабочие файлы со старого компьютера на новый, а это сотни папок с проектами, каждая из которых содержит большое количество эскизов, материалов и файлов конфигурации. Когда она использовала Finder или внешний жесткий диск для копирования, она видела, что индикатор выполнения едва двигается, и предполагала, что ей придется ждать несколько часов.

На самом деле такая ситуация встречается довольно часто. Независимо от того, находитесь ли вы в:
- Резервное копирование папки WeChat/QQ Chat (содержит много кэшированных изображений)
- Перенос кодовой базы большого проекта (содержит тысячи мелких файлов)
- Дублирование огромных библиотек фотографий/материалов

Большое количество мелких файлов может привести к снижению производительности, когда система должна обрабатывать операции чтения, копирования и записи для каждого отдельного файла, даже если вы используете высокоскоростной интерфейс Thunderbolt или USB.

## Решение: используйте команду tar, чтобы упаковать передачу.

Команда tar (сокращение от "ленточный архив") - это мощный инструмент в системах Unix/Linux, который позволяет собрать несколько файлов в один архив без сжатия. Этот метод намного быстрее, чем прямое копирование нескольких файлов, потому что:

1. системе приходится иметь дело только с одним большим файлом, а не с тысячами файлов меньшего размера
2. он позволяет избежать накладных расходов на обработку метаданных каждого файла
3. более эффективно используется скорость передачи данных устройства хранения.

## Шаг за шагом: как это работает

Чтобы эффективно передавать файлы, Мэй может выполнить следующие действия:

### Первый шаг: откройте терминал.

Нажмите на значок поиска в правом верхнем углу экрана, введите "terminal" (или Терминал) и нажмите Открыть.

### Шаг 2: Создайте tar-архив (без сжатия)

В Терминале введите следующую команду:

```bash
tar -cf my_files.tar /path/to/folder
```.

Здесь:
- `my_files.tar` - имя архивного файла, который вы хотите создать.
- `/path/to/folder` - путь к папке, в которую вы хотите упаковать файл.

Например, если Мэй хочет упаковать папку "DesignProjects" на своем рабочем столе, она напечатает:

```bash
tar -cf design_projects.tar ~/Desktop/DesignProjects
```.

Если вы хотите видеть прогресс в процессе упаковки, вы можете добавить параметр `-v` (v - подробный режим):

```bash
tar -cvf design_projects.tar ~/Desktop/DesignProjects
```

### Шаг 3: Перенесите tar-файл на новый компьютер

Теперь Мей просто должен скопировать этот единственный файл `design_projects.tar` на новый компьютер, и он будет готов к использованию:
- Внешний жесткий диск
- Передача данных по сети
- Прямое соединение двух компьютеров Mac (например, через thunderbolt)

Копирование одного большого файла намного быстрее, чем копирование большого количества маленьких файлов!

### Шаг 4: Распакуйте файлы на новом компьютере

В терминале на новом компьютере перейдите в место, куда вы хотите распаковать файл, и введите:

```bash
tar -xf design_projects.tar
```.

Если вы хотите распаковать в определенный каталог:

```bash
tar -xf design_projects.tar -C /destination/path
```

Например, распакуйте в папку "Документы":

```bash
tar -xf design_projects.tar -C ~/Documents
```

Это можно использовать, если вы хотите сохранить все разрешения на исходные файлы, особенно при переносе между учетными записями пользователей:

```bash
tar -xpf design_projects.tar -C ~/Documents
```

## Практический совет: Избегайте упаковки ненужных файлов

Если в вашей папке есть файлы, которые не нужно передавать (например, большое количество кэшированных изображений или временных файлов), вы можете исключить их при создании tar-архива:

```bash
tar -cf my_files.tar --exclude="*.jpg" /path/to/folder
```.

Эта команда упакует все файлы в указанной папке, кроме изображений jpg.

## РЕЗУЛЬТАТЫ: Экономия времени

Используя метод передачи tar-упаковки, Сяомэй потратил всего 20 минут на передачу файлов, которая заняла бы несколько часов, и обеспечил сохранение всех разрешений и структуры файлов в неизменном виде.

Этот простой, но мощный трюк из командной строки пригодится всем, кому нужно перенести большое количество файлов с одного компьютера на другой, будь то дизайнер, разработчик или обычный пользователь.

## Резюме

Когда вы столкнетесь с проблемой переноса большого количества маленьких файлов, не мучайтесь долгим ожиданием, а попробуйте использовать команду tar для создания одного архивного файла. Этот метод прост и эффективен, он не изменяет содержимое файлов, а лишь временно упаковывает их вместе для быстрой передачи. Даже если вы не знакомы с командной строкой, выполнение описанных выше шагов упростит задачу передачи файлов.

Не стесняйтесь оставлять комментарии в разделе комментариев, если у вас возникли вопросы или вам нужны более подробные инструкции!
