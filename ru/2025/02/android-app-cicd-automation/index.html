<!doctype html><html lang=ru-RU x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Практика непрерывной интеграции и автоматизированного выпуска релизов для Android-проектов | ЛюбимРешать</title><link href=/favicon.ico rel=icon type=image/x-icon><link rel=canonical href=https://jiejue.ai/ru/2025/02/android-app-cicd-automation/><meta name=author content="董昊"><meta name=description content="Будучи разработчиком Android, сталкивались ли вы с тем, что каждый раз при выпуске новой версии приходится вручную менять номер версии, писать журналы обновлений, создавать APK и загружать их на различные платформы - это повторяющиеся задачи, которые не только скучны, но и чреваты ошибками. Если вы страдаете от этого, то эта статья принесет вам облегчение.
"><meta name=keywords content="Разработка Под Android,CI/CD,Автоматизированная Сборка,Действия GitHub,Семантическое Освобождение"><meta name=generator content="Hugo 0.148.2"><meta property="og:url" content="https://jiejue.ai/ru/2025/02/android-app-cicd-automation/"><meta property="og:site_name" content="ЛюбимРешать"><meta property="og:title" content="Практика непрерывной интеграции и автоматизированного выпуска релизов для Android-проектов"><meta property="og:description" content="Будучи разработчиком Android, сталкивались ли вы с тем, что каждый раз при выпуске новой версии приходится вручную менять номер версии, писать журналы обновлений, создавать APK и загружать их на различные платформы - это повторяющиеся задачи, которые не только скучны, но и чреваты ошибками. Если вы страдаете от этого, то эта статья принесет вам облегчение."><meta property="og:locale" content="ru_RU"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-24T23:41:44+04:00"><meta property="article:modified_time" content="2025-08-13T15:03:02+00:00"><meta property="article:tag" content="Разработка Под Android"><meta property="article:tag" content="CI/CD"><meta property="article:tag" content="Автоматизированная Сборка"><meta property="article:tag" content="Действия GitHub"><meta property="article:tag" content="Семантическое Освобождение"><meta name=twitter:card content="summary"><meta name=twitter:title content="Практика непрерывной интеграции и автоматизированного выпуска релизов для Android-проектов"><meta name=twitter:description content="Будучи разработчиком Android, сталкивались ли вы с тем, что каждый раз при выпуске новой версии приходится вручную менять номер версии, писать журналы обновлений, создавать APK и загружать их на различные платформы - это повторяющиеся задачи, которые не только скучны, но и чреваты ошибками. Если вы страдаете от этого, то эта статья принесет вам облегчение."><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js integrity="sha256-PtHu0lJIiSHfZeNj1nFd6wTX+Squ255SGZ/fc8seCtM=" crossorigin=anonymous></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title=Повернуть!><div class="h-10 rounded-full"><img src=/favicon.ico alt=爱解决></div></div><div><a href=/ru class="text-lg font-semibold cursor-pointer">爱解决</a><div class="text-base-content/60 text-sm">用AI为人民服务</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/posts title=Архивы><ion-icon name=archive></ion-icon>Архивы</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/tags title="Все теги"><ion-icon name=pricetags></ion-icon>Все теги</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/ru/index.xml title=RSS><ion-icon class=group-hover:text-primary-content name=logo-rss></ion-icon></a><div class="dropdown dropdown-end dropdown-hover"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option"><ion-icon class="group-hover:text-primary-content text-xl" name=menu></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-xl"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/posts title=Архивы><ion-icon name=archive></ion-icon>Архивы</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/tags title="Все теги"><ion-icon name=pricetags></ion-icon>Все теги</a></li></ul></div><div class="dropdown dropdown-end dropdown-hover language-switcher"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" title="Переключить язык"><ion-icon class=group-hover:text-primary-content name=language-outline></ion-icon><span class="ml-1 hidden md:inline group-hover:text-primary-content language-name">Русский</span></div><ul tabindex=0 class="dropdown-content menu bg-base-100 rounded-box z-[1] shadow-xl border border-base-content/20" style=min-width:6rem;width:auto><li><a href=/zh/2025/02/android-app-cicd-automation/ class="flex items-center gap-2"><span class="flag flag-cn"></span>
<span class=language-name>中文</span></a></li></ul></div></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="Практика непрерывной интеграции и автоматизированного выпуска релизов для Android-проектов"><meta itemprop=description content="Будучи разработчиком Android, сталкивались ли вы с тем, что каждый раз при выпуске новой версии приходится вручную менять номер версии, писать журналы обновлений, создавать APK и загружать их на различные платформы - это повторяющиеся задачи, которые не только скучны, но и чреваты ошибками. Если вы страдаете от этого, то эта статья принесет вам облегчение."><meta itemprop=datePublished content="2025-02-24T23:41:44+04:00"><meta itemprop=dateModified content="2025-08-13T15:03:02+00:00"><meta itemprop=wordCount content="7363"><meta itemprop=keywords content="Разработка Под Android,CI/CD,Автоматизированная Сборка,Действия GitHub,Семантическое Освобождение"><header><h1 itemprop=headline>Практика непрерывной интеграции и автоматизированного выпуска релизов для Android-проектов</h1><p class=text-sm><span data-format=luxon>2025-02-24T23:41:44+04:00</span>
| <span>15 минут чтения</span>
| <span>Обновлено
<span data-format=luxon>2025-08-13T15:03:02Z</span></span></p><div class="flex justify-between"><div class="flex items-center"><span>@</span>
<span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>董昊</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=%d0%9f%d1%80%d0%b0%d0%ba%d1%82%d0%b8%d0%ba%d0%b0%20%d0%bd%d0%b5%d0%bf%d1%80%d0%b5%d1%80%d1%8b%d0%b2%d0%bd%d0%be%d0%b9%20%d0%b8%d0%bd%d1%82%d0%b5%d0%b3%d1%80%d0%b0%d1%86%d0%b8%d0%b8%20%d0%b8%20%d0%b0%d0%b2%d1%82%d0%be%d0%bc%d0%b0%d1%82%d0%b8%d0%b7%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%bd%d0%be%d0%b3%d0%be%20%d0%b2%d1%8b%d0%bf%d1%83%d1%81%d0%ba%d0%b0%20%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%be%d0%b2%20%d0%b4%d0%bb%d1%8f%20Android-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%be%d0%b2&amp;url=https://jiejue.ai/ru/2025/02/android-app-cicd-automation/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://jiejue.ai/ru/2025/02/android-app-cicd-automation/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=%d0%9f%d1%80%d0%b0%d0%ba%d1%82%d0%b8%d0%ba%d0%b0%20%d0%bd%d0%b5%d0%bf%d1%80%d0%b5%d1%80%d1%8b%d0%b2%d0%bd%d0%be%d0%b9%20%d0%b8%d0%bd%d1%82%d0%b5%d0%b3%d1%80%d0%b0%d1%86%d0%b8%d0%b8%20%d0%b8%20%d0%b0%d0%b2%d1%82%d0%be%d0%bc%d0%b0%d1%82%d0%b8%d0%b7%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%bd%d0%be%d0%b3%d0%be%20%d0%b2%d1%8b%d0%bf%d1%83%d1%81%d0%ba%d0%b0%20%d1%80%d0%b5%d0%bb%d0%b8%d0%b7%d0%be%d0%b2%20%d0%b4%d0%bb%d1%8f%20Android-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%be%d0%b2%20https://jiejue.ai/ru/2025/02/android-app-cicd-automation/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><img class="w-full z-30" src=https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250224234437821.webp alt="Практика непрерывной интеграции и автоматизированного выпуска релизов для Android-проектов"><p>Будучи разработчиком Android, сталкивались ли вы с тем, что каждый раз при выпуске новой версии приходится вручную менять номер версии, писать журналы обновлений, создавать APK и загружать их на различные платформы - это повторяющиеся задачи, которые не только скучны, но и чреваты ошибками. Если вы страдаете от этого, то эта статья принесет вам облегчение.</p><p>&lt;! &mdash;далее&ndash;></p><h2 id=зачем-вам-нужен-cicd>Зачем вам нужен CI/CD?</h2><p>Непрерывная интеграция/непрерывное развертывание (CI/CD) стала неотъемлемой частью современного процесса разработки программного обеспечения. Для разработчиков Android внедрение автоматизированного процесса имеет ряд неоспоримых преимуществ:</p><ol><li><strong>Автоматизация управления версиями</strong>: больше не нужно вручную изменять номер версии, система автоматически добавляет версию на основе информации о коммите</li><li><strong>Стандартизация процесса сборки</strong>: гарантирует, что каждая сборка будет следовать одному и тому же процессу, уменьшая вмешательство человека</li><li><strong>Упрощение процесса выпуска</strong>: автоматически генерирует журналы обновлений, упаковывает APK и выпускает их на указанные платформы.</li><li><strong>Повышение эффективности совместной работы команды</strong>: сократите количество ручных операций и позвольте команде сосредоточиться на разработке функций.</li><li><strong>Снижение риска выпуска</strong>: автоматизированное тестирование и проверка для уменьшения количества ошибок в процессе выпуска.</li></ol><p>Для зрелого проекта Android внедрение автоматизированной сборки и выпуска не только экономит время, но и повышает качество продукта и эффективность работы команды.</p><h2 id=выбор-инструмента-автоматизации>Выбор инструмента автоматизации</h2><p>Для реализации CI/CD в Android-проекте у нас есть множество инструментов на выбор, и здесь я представлю комбинацию, которая особенно подходит для Android-проектов: GitHub Actions + Semantic Release.</p><h3 id=github-actions>GitHub Actions</h3><p>GitHub Actions - это интегрированный CI/CD-сервис, предоставляемый GitHub, который позволяет создавать автоматизированные рабочие процессы непосредственно в репозиториях GitHub. Для разработчиков Android он имеет следующие преимущества:</p><ul><li>Бесшовная интеграция с репозиториями кода GitHub</li><li>Предоставление множества предварительно настроенных действий (Actions) для упрощения процесса настройки</li><li>Поддержка различных триггеров (таких как push кода, создание PR и т. д.)</li><li>Поставляется с функцией управления ключами, что удобно для хранения конфиденциальной информации, такой как ключи подписи.</li></ul><h3 id=семантический-релиз>Семантический релиз</h3><p>Semantic Release - это автоматизированный инструмент управления версиями и выпусками, основанный на принципах семантического версионирования (Semantic Versioning). Он позволяет:</p><ul><li>Анализирует коммиты для автоматического определения номера версии (мажорной, минорной или патча)</li><li>Автоматически генерировать журналы обновлений (Changelog)</li><li>Создавать теги версий и выпускать версии</li><li>Поддержка пользовательского процесса выпуска</li></ul><p>Объединив эти два компонента, мы можем создать мощный автоматизированный процесс, который сделает выпуск приложений для Android простым и надежным.</p><h2 id=общая-блок-схема>Общая блок-схема</h2><p>Прежде чем приступить к подробному объяснению, давайте представим себе весь процесс CI/CD с помощью следующей блок-схемы:</p><pre class=mermaid>
  flowchart TD
    A[开发者提交代码] --&gt;|推送到main分支| B[GitHub Actions触发];
    B --&gt; C[检出代码];
    C --&gt; D[设置环境&lt;br&gt;JDK, Gradle, Node.js];
    D --&gt; E[安装&lt;br&gt;semantic-release插件];
    E --&gt; F{分析提交信息};
    
    F --&gt;|需要发布| G[确定版本号&lt;br&gt;patch/minor/major];
    F --&gt;|不需要发布| Z[流程结束];
    
    G --&gt; H[更新版本号&lt;br&gt;build.gradle.kts];
    H --&gt; I[生成&lt;br&gt;CHANGELOG.md];
    I --&gt; J[构建签名APK&lt;br&gt;gradlew assembleRelease];
    J --&gt; K[提交版本号&lt;br&gt;和CHANGELOG更改];
    K --&gt; L[创建Tag&lt;br&gt;和GitHub Release];
    L --&gt; M[上传APK到Release];
    M --&gt; N[可选: 部署到&lt;br&gt;Google Play/Firebase];
    N --&gt; O[发布完成];
```.

С помощью этой блок-схемы мы можем наглядно увидеть весь процесс автоматизированного выпуска от отправки кода до финального выпуска на каждом этапе. Ниже я подробно опишу, как реализовать этот процесс.

## Шаги реализации

Ниже я расскажу, как поэтапно настроить процесс автоматизированного выпуска в типичном Android-проекте.

### 1. Настройте репозиторий GitHub

Сначала убедитесь, что ваш Android-проект размещен на GitHub и что структура проекта соответствует стандартному формату Android-проекта.

### 2. Создайте файл рабочего процесса

Создайте папку `.github/workflows` в корневом каталоге проекта, а затем добавьте в нее файл `release.yml` со следующим содержимым:

```yaml
name: Release

on:
  push:
    branches: [ main ]

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  release:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
          
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: &#39;17&#39;
          distribution: &#39;temurin&#39;
          
      - name: Setup Gradle
        uses: gradle/gradle-build-action@v2
          
      - name: Decode Keystore
        run: |
          echo &#34;${{ secrets.KEYSTORE_BASE64 }}&#34; | base64 -d &gt; app-release.jks
          
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: &#39;lts/*&#39;
          
      - name: Install semantic-release
        run: |
          npm install -g semantic-release @semantic-release/git @semantic-release/changelog @semantic-release/exec
          
      - name: Release
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
        run: npx semantic-release
```.

Этот рабочий процесс будет:
- Срабатывать при переносе кода в основную ветку
- Настроит окружение Java и Gradle
- Декодировать ключи подписи, хранящиеся в GitHub Secrets.
- Установить Semantic Release и его плагины
- Выполнить процесс выпуска

### 3. Настройка Semantic Release

Создайте файл `.releaserc.json` в корневом каталоге проекта, чтобы настроить Semantic Release:

```json
{
  &#34;branches&#34;: [&#34;main&#34;],
  &#34;plugins&#34;: [
    &#34;@semantic-release/commit-analyzer&#34;,
    &#34;@semantic-release/release-notes-generator&#34;,
    &#34;@semantic-release/changelog&#34;,
    [&#34;@semantic-release/exec&#34;, {
      &#34;verifyConditionsCmd&#34;: &#34;./gradlew assembleDebug -x lint&#34;,
      &#34;prepareCmd&#34;: &#34;sed -i &#39;s/versionName \&#34;.*\&#34;/versionName \&#34;${nextRelease.version}\&#34;/g&#39; app/build.gradle.kts&#34;,
      &#34;publishCmd&#34;: &#34;./gradlew assembleRelease --info --stacktrace -x lint -Psigning.storePassword=$STORE_PASSWORD -Psigning.keyPassword=$KEY_PASSWORD&#34;
    }],
    [&#34;@semantic-release/git&#34;, {
      &#34;assets&#34;: [
        &#34;app/build.gradle.kts&#34;,
        &#34;CHANGELOG.md&#34;
      ],
      &#34;message&#34;: &#34;chore(release): ${nextRelease.version}\n\n${nextRelease.notes}&#34;
    }],
    [&#34;@semantic-release/github&#34;, {
      &#34;assets&#34;: [
        {&#34;path&#34;: &#34;app/build/outputs/apk/release/app-release.apk&#34;, &#34;label&#34;: &#34;App ${nextRelease.version}&#34;}
      ]
    }]
  ]
}
```.

Этот конфигурационный файл определяет шаги в процессе выпуска:
- Анализ коммитов с помощью commit-analyzer
- Использование release-notes-generator для создания заметок о релизе.
- Обновление файла CHANGELOG.md с помощью журнала изменений.
- Используйте exec для выполнения команды Gradle, обновления номера версии и сборки APK.
- Зафиксируйте изменения в репозитории с помощью git
- Используйте github для создания релиза на GitHub и загрузки APK.

### 4. Настройка секретов GitHub

Добавьте следующий ключ в Настройки &gt; Секреты и переменные &gt; Действия в вашем репозитории GitHub:

- `KEYSTORE_BASE64`: Подписание файла ключа с использованием кодировки base64.
- `STORE_PASSWORD`: Пароль для хранилища ключей.
- `KEY_PASSWORD`: Парольная фраза ключа подписи

Это позволит вам безопасно использовать эту конфиденциальную информацию в среде CI.

### 5. Использование обычных сообщений коммита

Чтобы Semantic Release правильно определил тип обновления, нам нужно написать сообщение о фиксации в формате Conventional Commits:

- `fix: 修复某个bug` - Исправление ошибки, добавление версии патча (1.0.0 -&gt; 1.0.1)
- `feat: 添加新功能` - Новая функция, добавить минорную версию (1.0.0 -&gt; 1.1.0).
- `feat!: 添加不兼容的新功能` или `fix!: 不兼容的修复` - Несовместимое обновление, добавьте основную версию (1.0.0 -&gt; 2.0.0).
- `docs: 更新文档` - Изменение документации, не увеличивать номер версии
- `chore: 例行工作` - плановое обслуживание, номер версии не увеличивается

Этот формат не только автоматизирует версионность, но и улучшает читаемость истории коммитов.

## Проблемы и решения в реальных приложениях

В процессе реализации этого автоматизированного процесса мы столкнулись с некоторыми типичными проблемами, и вот их решения:

### Проблемы с разрешением

**Проблема**: В GitHub Actions у `GITHUB_TOKEN` по умолчанию может не хватать прав для выполнения определенных действий, например, проталкивания тегов.

**Решение**: Добавьте явную настройку разрешений в файл рабочего процесса:

```yaml
permissions:
  contents: write
  issues: write
  pull-requests: write
```.

### Ошибка Android Lint

**Проблема**: Проверки Android Lint могут сообщать об ошибках, которые приводят к сбою сборки, особенно при использовании некоторых специальных разрешений.

**Решение**: Измените файл `.releaserc.json`, чтобы пропустить проверку lint в командах проверки и выпуска:

```json
&#34;verifyConditionsCmd&#34;: &#34;./gradlew assembleDebug -x lint&#34;,
&#34;publishCmd&#34;: &#34;./gradlew assembleRelease -x lint -Psigning.storePassword=$STORE_PASSWORD -Psigning.keyPassword=$KEY_PASSWORD&#34;
</pre><p>Или настройте lint в <code>app/build.gradle.kts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>android {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 其他配置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    lint {
</span></span><span style=display:flex><span>        disable <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;ProtectedPermissions&#34;</span>
</span></span><span style=display:flex><span>        abortOnError = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=проблемы-с-защищенными-разрешениями>Проблемы с защищенными разрешениями</h3><p><strong>Проблема</strong>: Некоторые разрешения Android (например, <code>PACKAGE_USAGE_STATS</code>) защищены для использования только системными приложениями, что приводит к ошибке lint.</p><p><strong>Решение</strong>: Если эти разрешения действительно необходимы в приложении, их можно решить следующим образом:</p><ol><li>создайте файл <code>app/lint.xml</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;lint&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;issue</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;ProtectedPermissions&#34;</span> <span style=color:#a6e22e>severity=</span><span style=color:#e6db74>&#34;ignore&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/lint&gt;</span>
</span></span><span style=display:flex><span>```.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2. Ссылайтесь на этот файл в `app/build.gradle.kts`:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>```kotlin
</span></span><span style=display:flex><span>android {
</span></span><span style=display:flex><span>    lint {
</span></span><span style=display:flex><span>        lintConfig = file(&#34;lint.xml&#34;)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=фактический-эффект>Фактический эффект</h2><p>Когда все настройки будут выполнены, каждый раз, когда вы будете выкладывать код в основную ветку, автоматический процесс будет:</p><ol><li>проверять сообщение о фиксации, чтобы узнать, нужно ли выпустить новую версию</li><li>автоматически обновлять номер версии</li><li>генерировать или обновлять файл CHANGELOG.md</li><li>создаст подписанный APK-файл</li><li>создайте новый Git-тег и GitHub Release</li><li>прикрепите APK-файл к релизу</li></ol><p>Весь процесс не требует вмешательства человека, что значительно повышает эффективность и согласованность релизов.</p><h2 id=расширенная-оптимизация>Расширенная оптимизация</h2><p>После того как базовый процесс отлажен, можно приступить к расширенной оптимизации:</p><h3 id=добавьте-автоматизированные-тесты>Добавьте автоматизированные тесты</h3><p>Автоматически запускайте тесты перед выпуском, чтобы обеспечить качество кода:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Run tests</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: <span style=color:#ae81ff>./gradlew test</span>
</span></span></code></pre></div><h3 id=интеграция-firebase-app-distribution>Интеграция Firebase App Distribution</h3><p>Автоматическое распространение бета-версий APK среди тестеров:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Upload to Firebase App Distribution</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    npm install -g firebase-tools
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    firebase appdistribution:distribute app/build/outputs/apk/release/app-release.apk \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      --app ${{secrets.FIREBASE_APP_ID}} \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      --token ${{secrets.FIREBASE_TOKEN}} \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      --groups &#34;testers&#34; \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      --release-notes &#34;$(cat CHANGELOG.md)&#34;</span>
</span></span></code></pre></div><h3 id=автоматическое-развертывание-в-google-play>Автоматическое развертывание в Google Play</h3><p>Автоматическая публикация приложения в Google Play:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Upload to Google Play</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>r0adkll/upload-google-play@v1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>serviceAccountJsonPlainText</span>: <span style=color:#ae81ff>${{ secrets.SERVICE_ACCOUNT_JSON }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>packageName</span>: <span style=color:#ae81ff>com.your.package</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>releaseFiles</span>: <span style=color:#ae81ff>app/build/outputs/apk/release/app-release.apk</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>track</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>status</span>: <span style=color:#ae81ff>completed</span>
</span></span></code></pre></div><h2 id=резюме>Резюме</h2><p>Объединив GitHub Actions и Semantic Release, мы можем построить мощный автоматизированный процесс выпуска релизов для Android-проектов. Это не только сэкономит много времени на ручных операциях, но и повысит качество релизов и совместной работы команды.</p><p>Для разработчиков, имеющих опыт разработки под Android, изучение и внедрение этого процесса CI/CD является важным шагом в повышении эффективности разработки. Хотя первоначальная настройка может занять некоторое время, в долгосрочной перспективе преимущества автоматизации значительно перевесят эти затраты.</p><p>Надеемся, что эта статья поможет вам автоматизировать релизы в ваших Android-проектах, повысить эффективность разработки и дать вам больше времени, чтобы сосредоточиться на создании отличных приложений.</p><h2 id=справочные-ресурсы>Справочные ресурсы</h2><ul><li><a href=https://docs.github.com/en/actions target=_blank>Документация GitHub Actions</a></li><li><a href=https://semantic-release.gitbook.io/semantic-release/ target=_blank>Документация по семантическому релизу</a></li><li><a href=https://www.conventionalcommits.org/ target=_blank>Conventional Commits specification</a></li><li><a href=https://developer.android.com/studio/build target=_blank>Документация Gradle Android Plugin</a></li></ul></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a role=button class="btn btn-outline h-12" href=/ru/2025/02/android-compilation-error-debugging/ title="Системный подход к решению ошибок компиляции Android: от анализа ошибок до их решения"><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 text-xs font-normal">Предыдущая</span>
<span class="max-w-48 truncate">Системный подход к решению ошибок компиляции Android: от анализа ошибок до их решения</span></div></a><a role=button class="btn btn-outline h-12" href=/ru/2025/02/work-for-your-dream/ title="Дайте возможность каждому работать ради своей мечты"><div class="inline-flex flex-col items-end"><span class="text-base-content/60 text-xs font-normal">Следующая</span>
<span class="max-w-48 truncate">Дайте возможность каждому работать ради своей мечты</span></div><ion-icon name=chevron-forward></ion-icon></a></div><div class=divider></div><section class=space-y-4><article><div id=tcomment></div><script src=https://cdn.jsdelivr.net/npm/twikoo@1.6.41/dist/twikoo.min.js></script><script>twikoo.init({envId:"https://6dhzwvtyqz753zhpkrvnnydhlm0vubmy.lambda-url.ap-east-1.on.aws/",el:"#tcomment",region:"ap-east-1",path:"/ru/2025/02/android-app-cicd-automation/",lang:"zh-CN"})</script></article></section></article></div><div x-data=tocHighlighter() @scroll.window=debouncedScroll class="hidden lg:flex lg:flex-col lg:items-end"><nav id=TableOfContents><ul><li><a href=#зачем-вам-нужен-cicd>Зачем вам нужен CI/CD?</a></li><li><a href=#выбор-инструмента-автоматизации>Выбор инструмента автоматизации</a><ul><li><a href=#github-actions>GitHub Actions</a></li><li><a href=#семантический-релиз>Семантический релиз</a></li></ul></li><li><a href=#общая-блок-схема>Общая блок-схема</a><ul><li><a href=#проблемы-с-защищенными-разрешениями>Проблемы с защищенными разрешениями</a></li></ul></li><li><a href=#фактический-эффект>Фактический эффект</a></li><li><a href=#расширенная-оптимизация>Расширенная оптимизация</a><ul><li><a href=#добавьте-автоматизированные-тесты>Добавьте автоматизированные тесты</a></li><li><a href=#интеграция-firebase-app-distribution>Интеграция Firebase App Distribution</a></li><li><a href=#автоматическое-развертывание-в-google-play>Автоматическое развертывание в Google Play</a></li></ul></li><li><a href=#резюме>Резюме</a></li><li><a href=#справочные-ресурсы>Справочные ресурсы</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 ЛюбимРешать</p><p>一个热爱解决问题的网站</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
本站总访问量 <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
本站访客数 <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 ЛюбимРешать</p><p>一个热爱解决问题的网站</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
本站总访问量 <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
本站访客数 <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"ru"}).toFormat("yyyy年MM月dd日 HH:mm")})}</script><script src=/js/toc.min.js></script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img', {
        background: 'oklch(var(--b1))',
        margin: 24,
      })
    </script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
      </script><script async src="https://www.googletagmanager.com/gtag/js?id=G-S0KCH9BW4F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S0KCH9BW4F")}</script><script type=module src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin=anonymous></script><script nomodule src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin=anonymous></script></body></html>