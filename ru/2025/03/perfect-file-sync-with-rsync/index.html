<!doctype html><html lang=ru-RU x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Идеальная синхронизация файлов с помощью Rsync: исчерпывающее руководство от новичка до продвинутого пользователя | ЛюбимРешать</title><link href=/favicon.ico rel=icon type=image/x-icon><link rel=canonical href=https://jiejue.ai/ru/2025/03/perfect-file-sync-with-rsync/><meta name=author content="董昊"><meta name=description content="Вам когда-нибудь приходилось переносить большое количество файлов между двумя компьютерами? Или вам нужно создать резервную копию важных данных, но вы боитесь потерять атрибуты файлов (например, время модификации и разрешения)? Представленный сегодня инструмент rsync может не только решить эти проблемы, но и сделать передачу файлов более быстрой и надежной. Независимо от того, являетесь ли вы обычным пользователем или профессионалом, это руководство поможет вам легко освоить этот мощный инструмент.
"><meta name=keywords content="Инструменты Эффективности,Управление Документами,Командная Строка (Вычислительная Техника)"><meta name=generator content="Hugo 0.148.2"><meta property="og:url" content="https://jiejue.ai/ru/2025/03/perfect-file-sync-with-rsync/"><meta property="og:site_name" content="ЛюбимРешать"><meta property="og:title" content="Идеальная синхронизация файлов с помощью Rsync: исчерпывающее руководство от новичка до продвинутого пользователя"><meta property="og:description" content="Вам когда-нибудь приходилось переносить большое количество файлов между двумя компьютерами? Или вам нужно создать резервную копию важных данных, но вы боитесь потерять атрибуты файлов (например, время модификации и разрешения)? Представленный сегодня инструмент rsync может не только решить эти проблемы, но и сделать передачу файлов более быстрой и надежной. Независимо от того, являетесь ли вы обычным пользователем или профессионалом, это руководство поможет вам легко освоить этот мощный инструмент."><meta property="og:locale" content="ru_RU"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-27T22:47:42+04:00"><meta property="article:modified_time" content="2025-08-13T15:03:02+00:00"><meta property="article:tag" content="Инструменты Эффективности"><meta property="article:tag" content="Управление Документами"><meta property="article:tag" content="Командная Строка (Вычислительная Техника)"><meta name=twitter:card content="summary"><meta name=twitter:title content="Идеальная синхронизация файлов с помощью Rsync: исчерпывающее руководство от новичка до продвинутого пользователя"><meta name=twitter:description content="Вам когда-нибудь приходилось переносить большое количество файлов между двумя компьютерами? Или вам нужно создать резервную копию важных данных, но вы боитесь потерять атрибуты файлов (например, время модификации и разрешения)? Представленный сегодня инструмент rsync может не только решить эти проблемы, но и сделать передачу файлов более быстрой и надежной. Независимо от того, являетесь ли вы обычным пользователем или профессионалом, это руководство поможет вам легко освоить этот мощный инструмент."><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js integrity="sha256-PtHu0lJIiSHfZeNj1nFd6wTX+Squ255SGZ/fc8seCtM=" crossorigin=anonymous></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title=Повернуть!><div class="h-10 rounded-full"><img src=/favicon.ico alt=爱解决></div></div><div><a href=/ru class="text-lg font-semibold cursor-pointer">爱解决</a><div class="text-base-content/60 text-sm">用AI为人民服务</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/posts title=Архивы><ion-icon name=archive></ion-icon>Архивы</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/tags title="Все теги"><ion-icon name=pricetags></ion-icon>Все теги</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/ru/index.xml title=RSS><ion-icon class=group-hover:text-primary-content name=logo-rss></ion-icon></a><div class="dropdown dropdown-end dropdown-hover"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option"><ion-icon class="group-hover:text-primary-content text-xl" name=menu></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-xl"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/posts title=Архивы><ion-icon name=archive></ion-icon>Архивы</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/ru/tags title="Все теги"><ion-icon name=pricetags></ion-icon>Все теги</a></li></ul></div><div class="dropdown dropdown-end dropdown-hover language-switcher"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" title="Переключить язык"><ion-icon class=group-hover:text-primary-content name=language-outline></ion-icon><span class="ml-1 hidden md:inline group-hover:text-primary-content language-name">Русский</span></div><ul tabindex=0 class="dropdown-content menu bg-base-100 rounded-box z-[1] shadow-xl border border-base-content/20" style=min-width:6rem;width:auto><li><a href=/zh/2025/03/perfect-file-sync-with-rsync/ class="flex items-center gap-2"><span class="flag flag-cn"></span>
<span class=language-name>中文</span></a></li></ul></div></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="Идеальная синхронизация файлов с помощью Rsync: исчерпывающее руководство от новичка до продвинутого пользователя"><meta itemprop=description content="Вам когда-нибудь приходилось переносить большое количество файлов между двумя компьютерами? Или вам нужно создать резервную копию важных данных, но вы боитесь потерять атрибуты файлов (например, время модификации и разрешения)? Представленный сегодня инструмент rsync может не только решить эти проблемы, но и сделать передачу файлов более быстрой и надежной. Независимо от того, являетесь ли вы обычным пользователем или профессионалом, это руководство поможет вам легко освоить этот мощный инструмент."><meta itemprop=datePublished content="2025-03-27T22:47:42+04:00"><meta itemprop=dateModified content="2025-08-13T15:03:02+00:00"><meta itemprop=wordCount content="6291"><meta itemprop=keywords content="Инструменты Эффективности,Управление Документами,Командная Строка (Вычислительная Техника)"><header><h1 itemprop=headline>Идеальная синхронизация файлов с помощью Rsync: исчерпывающее руководство от новичка до продвинутого пользователя</h1><p class=text-sm><span data-format=luxon>2025-03-27T22:47:42+04:00</span>
| <span>13 минут чтения</span>
| <span>Обновлено
<span data-format=luxon>2025-08-13T15:03:02Z</span></span></p><div class="flex justify-between"><div class="flex items-center"><span>@</span>
<span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>董昊</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=%d0%98%d0%b4%d0%b5%d0%b0%d0%bb%d1%8c%d0%bd%d0%b0%d1%8f%20%d1%81%d0%b8%d0%bd%d1%85%d1%80%d0%be%d0%bd%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f%20%d1%84%d0%b0%d0%b9%d0%bb%d0%be%d0%b2%20%d1%81%20%d0%bf%d0%be%d0%bc%d0%be%d1%89%d1%8c%d1%8e%20Rsync:%20%d0%b8%d1%81%d1%87%d0%b5%d1%80%d0%bf%d1%8b%d0%b2%d0%b0%d1%8e%d1%89%d0%b5%d0%b5%20%d1%80%d1%83%d0%ba%d0%be%d0%b2%d0%be%d0%b4%d1%81%d1%82%d0%b2%d0%be%20%d0%be%d1%82%20%d0%bd%d0%be%d0%b2%d0%b8%d1%87%d0%ba%d0%b0%20%d0%b4%d0%be%20%d0%bf%d1%80%d0%be%d0%b4%d0%b2%d0%b8%d0%bd%d1%83%d1%82%d0%be%d0%b3%d0%be%20%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f&amp;url=https://jiejue.ai/ru/2025/03/perfect-file-sync-with-rsync/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://jiejue.ai/ru/2025/03/perfect-file-sync-with-rsync/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=%d0%98%d0%b4%d0%b5%d0%b0%d0%bb%d1%8c%d0%bd%d0%b0%d1%8f%20%d1%81%d0%b8%d0%bd%d1%85%d1%80%d0%be%d0%bd%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f%20%d1%84%d0%b0%d0%b9%d0%bb%d0%be%d0%b2%20%d1%81%20%d0%bf%d0%be%d0%bc%d0%be%d1%89%d1%8c%d1%8e%20Rsync:%20%d0%b8%d1%81%d1%87%d0%b5%d1%80%d0%bf%d1%8b%d0%b2%d0%b0%d1%8e%d1%89%d0%b5%d0%b5%20%d1%80%d1%83%d0%ba%d0%be%d0%b2%d0%be%d0%b4%d1%81%d1%82%d0%b2%d0%be%20%d0%be%d1%82%20%d0%bd%d0%be%d0%b2%d0%b8%d1%87%d0%ba%d0%b0%20%d0%b4%d0%be%20%d0%bf%d1%80%d0%be%d0%b4%d0%b2%d0%b8%d0%bd%d1%83%d1%82%d0%be%d0%b3%d0%be%20%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f%20https://jiejue.ai/ru/2025/03/perfect-file-sync-with-rsync/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><img class="w-full z-30" src=https://jiejue.obs.ap-southeast-1.myhuaweicloud.com/20250327225522772.webp alt="Идеальная синхронизация файлов с помощью Rsync: исчерпывающее руководство от новичка до продвинутого пользователя"><p>Вам когда-нибудь приходилось переносить большое количество файлов между двумя компьютерами? Или вам нужно создать резервную копию важных данных, но вы боитесь потерять атрибуты файлов (например, время модификации и разрешения)? Представленный сегодня инструмент rsync может не только решить эти проблемы, но и сделать передачу файлов более быстрой и надежной. Независимо от того, являетесь ли вы обычным пользователем или профессионалом, это руководство поможет вам легко освоить этот мощный инструмент.</p><p>&lt;! &ndash;подробнее&ndash;></p><h2 id=что-такое-rsync>Что такое rsync?</h2><p>rsync (remote synchronization, удаленная синхронизация) - это широко используемый инструмент синхронизации файлов в Unix-подобных системах (включая macOS). Он позволяет эффективно передавать и синхронизировать файлы между локальными файловыми системами или между различными компьютерами по сети.</p><p>В двух словах, rsync - это как умный мувер (инструмент для передачи файлов), который специально:</p><ul><li>копирует только файлы с изменениями, экономя время и пропускную способность сети</li><li>он может сохранять исходные свойства файлов (временные метки, разрешения и т. д.)</li><li>Поддерживает возобновление работы с точки останова, поэтому вы можете возобновить работу с точки останова после того, как передача была прервана.</li><li>Обеспечивает подробное отображение хода выполнения</li></ul><h2 id=почему-стоит-использовать-rsync>Почему стоит использовать rsync?</h2><p>Представьте себе такие сценарии:</p><ul><li><strong>Дизайнер Сяо Ван</strong> должен копировать готовые файлы с рабочего компьютера на домашний резервный жесткий диск, но копирование через USB слишком медленное и часто теряет время создания файла.</li><li><strong>Бухгалтеру Сестре Ли</strong> необходимо еженедельно создавать резервные копии финансовых данных, но она хочет, чтобы дата модификации файлов резервных копий оставалась неизменной, чтобы можно было отслеживать историю файлов</li><li><strong>Студент Сяо Чэнь</strong> часто синхронизирует учебные материалы между двумя компьютерами, но из-за нестабильности сети передача данных прерывается, и каждый раз приходится начинать заново</li></ul><p>Во всех этих случаях rsync отлично решает проблему.</p><h2 id=подготовка-перед-началом-использования-rsync>Подготовка перед началом использования rsync</h2><h3 id=установите-последнюю-версию>Установите последнюю версию</h3><p>Версия rsync, поставляемая с macOS, устарела и имеет ограниченный функционал. Рекомендуется установить последнюю версию через Homebrew:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install rsync
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>После установки вы можете проверить версию с помощью следующей команды:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span>rsync --version
</span></span></code></pre></div><p>Если отображается версия 3.x.x (например, 3.2.x или выше), то поздравляем, вы можете использовать все расширенные возможности, описанные в этой статье!</p><h3 id=понимание-базовой-структуры-команд>Понимание базовой структуры команд</h3><p>Основной формат команд для rsync следующий:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync <span style=color:#f92672>[</span>选项<span style=color:#f92672>]</span> 源路径 目标路径
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Основы rsync: простые и полезные команды синхронизации</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Самые основные команды синхронизации</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span>rsync -av 源文件夹/ 目标文件夹/
</span></span></code></pre></div><p>в этой команде:</p><ul><li><code>-a</code> - это &ldquo;архивный режим&rdquo;, который сохраняет почти все атрибуты файлов.</li><li><code>-v</code> означает &ldquo;Подробный вывод&rdquo; и отображает копируемые файлы.</li></ul><p>Например, синхронизация &ldquo;Моих документов&rdquo; с внешним жестким диском:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync -av <span style=color:#e6db74>&#34;~/Documents/&#34;</span> <span style=color:#e6db74>&#34;/Volumes/ExternalDrive/Documents/&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span> означает <span style=color:#e6db74>&#34;подробный вывод&#34;</span>, который показывает копируемый файл.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Добавить отображение прогресса</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>При синхронизации больших файлов или большого количества файлов важно знать о ходе выполнения:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span>rsync -av --progress 源文件夹/ 目标文件夹/
</span></span></code></pre></div><h2 id=продвинутый-совет-заставьте-rsync-делать-именно-то-что-вам-нужно>Продвинутый совет: Заставьте rsync делать именно то, что вам нужно</h2><h3 id=различные-способы-отображения-прогресса>Различные способы отображения прогресса</h3><p>rsync предоставляет множество вариантов отображения прогресса для различных сценариев:</p><ol><li><p>**<code>--progress</code>*: Отображение прогресса передачи каждого файла.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync -av --progress 源文件夹/ 目标文件夹/
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>Подходит для: сценариев, в которых необходимо видеть подробный прогресс каждого файла
</span></span></code></pre></div></li><li><p><strong><code>--info=progress2</code></strong> (рекомендуется, требует более новых версий rsync): отображение общего прогресса передачи.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync -av --info<span style=color:#f92672>=</span>progress2 源文件夹/ 目标文件夹/
</span></span></code></pre></div><p>Подходит для: синхронизации большого количества файлов, когда вы просто хотите увидеть общий прогресс.</p></li><li><p><strong><strong>PROTECTED_CODE_INLINE_CODE_22</strong></strong>: это комбинация <strong>PROTECTED_CODE_INLINE_CODE_23</strong>, позволяющая осуществлять прерывистые передачи и показывать прогресс.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync -avP 源文件夹/ 目标文件夹/
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>Подходит для: передачи в условиях нестабильной сетевой среды
</span></span></code></pre></div></li></ol><h3 id=сохранение-оригинальных-временных-меток-и-атрибутов>Сохранение оригинальных временных меток и атрибутов</h3><p>Иногда вы можете обнаружить, что время модификации файла становится текущим временем после синхронизации. Этого можно избежать, если использовать правильные опции:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync -avt 源文件夹/ 目标文件夹/
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>среди прочих:
</span></span><span style=display:flex><span>- <span style=color:#e6db74>`</span>-t<span style=color:#e6db74>`</span> используется исключительно для сохранения времени модификации файла
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Для пользователей Mac можно добавить опцию <span style=color:#e6db74>`</span>-E<span style=color:#e6db74>`</span>, чтобы сохранить специфические для macOS атрибуты файла:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span>rsync -avtE 源文件夹/ 目标文件夹/
</span></span></code></pre></div><h3 id=зеркальная-синхронизация-удаление-лишних-файлов-с-целевого-диска>Зеркальная синхронизация (удаление лишних файлов с целевого диска)</h3><p>Если вы хотите, чтобы целевая папка полностью совпадала с исходной (удалите из целевой папки файлы, которых нет в исходной):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rsync -av --delete 源文件夹/ 目标文件夹/
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>⚠️ Будьте осторожны с параметром <span style=color:#e6db74>`</span>--delete<span style=color:#e6db74>`</span>, который удаляет в целевой папке файлы, отсутствующие в исходной папке.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Сначала протестируйте, затем выполните</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Вы можете использовать параметр <span style=color:#e6db74>`</span>--dry-run<span style=color:#e6db74>`</span> для проверки перед выполнением критической синхронизации:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span>rsync -av --dry-run 源文件夹/ 目标文件夹/
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Это покажет операцию, которая будет выполнена, но не выполнит ее на самом деле.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### Исключить определенные файлы или папки</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Исключите файлы, которые не нужно синхронизировать:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span>rsync -av --exclude<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;*.tmp&#39;</span> --exclude<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;temp/&#39;</span> 源文件夹/ 目标文件夹/
</span></span></code></pre></div><h2 id=как-работает-rsync-понимание-принципа>Как работает rsync: понимание принципа</h2><p>rsync эффективен, потому что использует умный алгоритм для распознавания изменений файлов.</p><pre class=mermaid>
  flowchart TD
    A[开始同步] --&gt; B{检查文件是否存在于目标}
    B --&gt;|否| C[完整复制文件]
    B --&gt;|是| D{检查文件大小和修改时间}
    D --&gt;|不同| E[计算文件差异]
    D --&gt;|相同| F[跳过文件]
    E --&gt; G{传输差异块}
    G --&gt; H[在目标重建完整文件]
    C --&gt; Z[继续下一个文件]
    F --&gt; Z
    H --&gt; Z
    Z --&gt; I{还有更多文件?}
    I --&gt;|是| B
    I --&gt;|否| J[同步完成]
```.

При такой инкрементной передаче передается только та часть файла, которая изменилась, что значительно повышает эффективность. Например, если в файле объемом 10 ГБ изменилось всего несколько МБ, rsync передаст только эти несколько МБ данных.

## Лучшие практики для распространенных сценариев

### Сценарий 1: Резервное копирование важных документов

Сохраните все атрибуты и покажите общий прогресс:

```bash
rsync -avE --info=progress2 ~/Documents/ /Volumes/Backup/Documents/
```.

### Сценарий 2: Синхронизация папок между двумя компьютерами Mac

Сетевое окружение нестабильно и требует прерывистой и сжатой передачи данных:

```bash
rsync -avzP ~/Projects/ user@remote-mac:~/Projects/
```.

### Сценарий 3: Создание полностью зеркального резервного копирования

Полная синхронизация зеркал с сохранением всех атрибутов:

```bash
rsync -avE --delete --info=progress2 ~/Pictures/ /Volumes/Backup/Pictures/
```.

## Устранение общих проблем

1. **Проблемы с правами доступа к файлам**: Если вы столкнулись с ошибкой прав доступа, попробуйте выполнить команду с `sudo`.
2. **Изменения временной метки**: убедитесь, что вы используете опции `-a` или `-t`.
3. **Слишком медленно**: добавьте опцию `-z`, чтобы включить сжатие.
4. **Дополнительные опции не найдены**: проверьте версию rsync, возможно, потребуется обновление

## Резюме

rsync - это очень мощный инструмент синхронизации файлов, освоение которого может значительно повысить эффективность управления файлами. Я надеюсь, что это руководство поможет вам полностью использовать потенциал rsync: от простых резервных копий до сложных удаленных синхронизаций, от базового использования до расширенных опций.

Если вы дизайнер, которому необходимо создать резервную копию своей работы, бухгалтер, которому нужно сохранить финансовые данные, или студент, которому нужно синхронизировать учебные материалы на нескольких устройствах, rsync удовлетворит все ваши ожидания от синхронизации файлов.

## Подумайте о проблеме

Если вы регулярно синхронизируете файлы между несколькими устройствами, попробуйте создать простой сценарий для автоматизации этого процесса. Как вы думаете, каковы преимущества и недостатки rsync по сравнению с другими программами для резервного копирования при выполнении регулярных задач резервного копирования? Как на практике вы будете балансировать между автоматизацией и безопасностью данных?
</pre></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a role=button class="btn btn-outline h-12" href=/ru/2025/03/efficient-file-transfer-with-tar/ title="Эффективная передача файлов с помощью команды tar: попрощайтесь с долгим ожиданием!"><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 text-xs font-normal">Предыдущая</span>
<span class="max-w-48 truncate">Эффективная передача файлов с помощью команды tar: попрощайтесь с долгим ожиданием!</span></div></a><a role=button class="btn btn-outline h-12" href=/ru/2025/03/kusto-query-language-for-log-analysis/ title="KQL: таинственный инструмент для анализа журналов облачных сервисов"><div class="inline-flex flex-col items-end"><span class="text-base-content/60 text-xs font-normal">Следующая</span>
<span class="max-w-48 truncate">KQL: таинственный инструмент для анализа журналов облачных сервисов</span></div><ion-icon name=chevron-forward></ion-icon></a></div><div class=divider></div><section class=space-y-4><article><div id=tcomment></div><script src=https://cdn.jsdelivr.net/npm/twikoo@1.6.41/dist/twikoo.min.js></script><script>twikoo.init({envId:"https://6dhzwvtyqz753zhpkrvnnydhlm0vubmy.lambda-url.ap-east-1.on.aws/",el:"#tcomment",region:"ap-east-1",path:"/ru/2025/03/perfect-file-sync-with-rsync/",lang:"zh-CN"})</script></article></section></article></div><div x-data=tocHighlighter() @scroll.window=debouncedScroll class="hidden lg:flex lg:flex-col lg:items-end"><nav id=TableOfContents><ul><li><a href=#что-такое-rsync>Что такое rsync?</a></li><li><a href=#почему-стоит-использовать-rsync>Почему стоит использовать rsync?</a></li><li><a href=#подготовка-перед-началом-использования-rsync>Подготовка перед началом использования rsync</a><ul><li><a href=#установите-последнюю-версию>Установите последнюю версию</a></li><li><a href=#понимание-базовой-структуры-команд>Понимание базовой структуры команд</a></li></ul></li><li><a href=#продвинутый-совет-заставьте-rsync-делать-именно-то-что-вам-нужно>Продвинутый совет: Заставьте rsync делать именно то, что вам нужно</a><ul><li><a href=#различные-способы-отображения-прогресса>Различные способы отображения прогресса</a></li><li><a href=#сохранение-оригинальных-временных-меток-и-атрибутов>Сохранение оригинальных временных меток и атрибутов</a></li><li><a href=#зеркальная-синхронизация-удаление-лишних-файлов-с-целевого-диска>Зеркальная синхронизация (удаление лишних файлов с целевого диска)</a></li></ul></li><li><a href=#как-работает-rsync-понимание-принципа>Как работает rsync: понимание принципа</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 ЛюбимРешать</p><p>一个热爱解决问题的网站</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
本站总访问量 <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
本站访客数 <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2025 ЛюбимРешать</p><p>一个热爱解决问题的网站</p></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
本站总访问量 <span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
本站访客数 <span id=busuanzi_value_site_uv></span></span></section></span></section></script><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"ru"}).toFormat("yyyy年MM月dd日 HH:mm")})}</script><script src=/js/toc.min.js></script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img', {
        background: 'oklch(var(--b1))',
        margin: 24,
      })
    </script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
      </script><script async src="https://www.googletagmanager.com/gtag/js?id=G-S0KCH9BW4F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S0KCH9BW4F")}</script><script type=module src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin=anonymous></script><script nomodule src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin=anonymous></script></body></html>